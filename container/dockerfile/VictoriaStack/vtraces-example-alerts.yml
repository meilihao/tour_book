# https://github.com/VictoriaMetrics/VictoriaTraces/blob/master/deployment/docker/vtraces-example-alerts.yml
groups:
  - name: trace-rules
    type: vlogs
    interval: 30s
    rules:
      - alert: AlwaysFiring
        expr: '* | stats count()'
        annotations:
          description: "Generated more than {{$value}} trace spans in the last 1 minute"
      - alert: TooManyLogs
        expr: '* | stats by (name) count() as total | filter total:>50'
        annotations:
          description: "Received more than 50 trace spans for span name {{$labels.name}} in the last 1 minute: {{$value}}"
      - record: name:spans:count
        expr: '* | stats by (name) count()'