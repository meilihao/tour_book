## 验证码

- 注册只记成功,登录只记失败.

## 登录注册

1. 提供"记住密码"的方式已过时.session应在一段时间内记住登录状态(一般是7天),仅在用户主动点击退出时才清除登录状态,app端也同理.

1. app简化注册过程，仅使用手机号作账号,短信验证的方式进行注册(同时提供密码可见切换的功能),再基于手机号去拓展其他业务; 另一种方式是，app提供不涉及账号的预览来吸引用户，再通过快捷的帐号注册和登录来增加用户.

1. 网页端登录,可以提供app扫码登录(推荐)或微信扫码登录.

## 其他
- [阿里百川 > 云账号](http://baichuan.taobao.com/docs/doc.htm?spm=a3c0d.7629140.0.0.06glgP&treeId=40&articleId=103664&docType=1)

## 优惠码为什么多是字符串而不是数字
优惠码的核心思路是在能表示尽可能多的数量的同时输入尽可能少的个数, 即**编码空间**问题:数字的编码空间是`0~9`,而字符的编码空间是`0~9a~zA~Z`, 字符有明显的优势.

## 清理无效的分布式token
假设token包含user_id和org_id(公司id),如何保证管理员删除用户时该token要失效.

方法:
1. 使用中间件和user_org的关联表: 每个请求过来时查找表user_org一次,判断用户是否还在该公司.
1. 使用中间件和redis: 用户被删除时将user_id和timestamp放入redis,其过期时间比token的有效期略长即可, 每个请求过来时检查redis里是否有该用户的timestamp,如果有,在timestamp前签发的token均无效即可.

## 消息内容是否需要保存为某种格式,比如json
1. 消息内容需要回顾,保存为json,便于修改和升级
1. 消息阅后删除或不再关注, 直接存成string,无需考虑修改或升级.