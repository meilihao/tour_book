# 安全

安全的本质是信任,那么安全问题的本质是信任的问题.

安全要素:
1. 机密性(Confidentiality),保证数据不泄露,比如加密.
1. 完整性(Integrity),保证数据是完整且没有被篡改的,比如数字签名.
1. 可用性(Availability),保证资源随时可用,比如抗DDoS.
1. 可审计和不可抵赖性,比如堡垒机.

安全评估:资产等级划分->威胁分析->风险分析->确认解决方案.


## csrf

本质:操作所需的所有参数都被攻击者猜到或拿到, 尤其是cookie.

防御方法:
1. 尽量使用post, 不彻底: post也可被伪造
1. 验证码, 不彻底: 可破解验证码
1. 验证referer, 不彻底: referer可伪造
1. csrf token, **推荐**, token存放地: header, form, **禁止存入cookie**.
1. session in localstorage, **推荐**.

## xss
未过滤用户输入

防御方法:
- 对输入/url参数进行过滤
- 对输出编码
- cookie 设置为 http-only

## 认证和会话管理

认证是识别用户是谁,授权是决定用户能做什么.
