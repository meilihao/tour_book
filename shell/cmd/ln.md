# ln (link)

## 描述

为文件创件连接，连接类型分为硬连接和符号连接两种，默认的连接类型是硬连接.

## 格式

    ln [option] [source] [target]

## 参数
- -b : 对将在链接时会被覆盖或删除的文件进行备份
- -s : 创建符号连接即软链接,删除源会导致软连接无法使用
- -f : 强制创建文件或目录的链接
- -i : 覆盖前先询问
- -v : 显示创建链接的过程

## 例
```sh
$ln -s /usr/mengqc/mub1 /usr/liu/abc # 在目录/usr/liu下建立一个符号链接文件abc，使它指向目录/usr/mengqc/mub1
```

## 扩展
链接:
- 硬链接(hard link): 通过inode进行链接, 生成的是普通文件(与源文件的inode相同)
    1. 具有相同inode的多个文件互为硬链接, 类似于别名
    1. 删除硬链接, 不实际删除文件; 只有删除了源文件和所有硬链接(即文件对应的硬链接数为0), 文件才被实际删除
    1. 目录无法创建硬链接
    1. 不能跨分区
- 软链接(也叫符号链接, symbolic link), 生成的是符号链接文件(与源文件的inode不同)
    1. 软链接类似于文本文件, 里面存放的是源文件的路径, 可通过`readlink`命令读取
    1. 即使删除了源文件, 软链接还会存在, 但不能通过软链接访问了

删除影响:
1. 删除软链接对源文件和硬链接无影响
1. 删除硬链接对源文件和软链接(指向源文件)无影响.
1. 删除源文件, 对硬链接没影响, 但会导致链接到源文件的软链接失效

> 在linux ext4上, 每个文件都有一个独立的inode编号, 多个文件名指向同一个inode是允许的, 此时的文件就是硬链接. 即为一个文件设置多个入口可避免重要文件被误删
> 很多硬件设备的快照功能就是利用了硬链接的原理