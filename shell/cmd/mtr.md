# mtr

## 描述

一般判断网络连通性用ping 和traceroute(windows用tracert),ping的话可以来判断丢包率，traceroute可以用来跟踪路由，在Linux中有一个更好的网络连通性判断工具，它可以结合ping nslookup traceroute 来判断网络的相关特性,这个命令就是`mtr`.

## 选项

- -4 : 用IPv4
- -6 : 用IPv6
- -c : 即`–report-cycles COUNT`, 设置每秒发送ping数据包的数量,默认值是10
- -i : 设置要求ICMP响应的时间, 默认是1秒
- -r : 以报告模式显示
- -s : 指定ping数据包的大小


## 例
```sh
$ mtr -r -c 15 47.100.15.8
Start: 2018-11-29T15:20:54+0800
HOST: chen-pc                     Loss%   Snt   Last   Avg  Best  Wrst StDev
  1.|-- 192.168.11.2               0.0%    15    0.2   0.2   0.1   0.2   0.0
  2.|-- 221.12.20.21               0.0%    15    4.0   3.9   3.2   6.2   0.8   ＃　联通宽带
  3.|-- 124.90.33.241             46.7%    15    2.9   3.0   2.7   3.4   0.3
  4.|-- 124.160.233.153            0.0%    15    3.9   4.6   3.5  13.3   2.5
  5.|-- 219.158.5.241              0.0%    15    9.1   9.5   9.0  12.8   0.9
  6.|-- 139.226.201.78            86.7%    15    6.4   6.5   6.4   6.6   0.2
  7.|-- 139.226.204.126           86.7%    15    6.2   6.2   6.2   6.2   0.0
  8.|-- 140.206.108.134            0.0%    15    9.6   7.7   6.3  13.1   1.8
  9.|-- 140.205.50.254             0.0%    15    8.8  12.0   7.2  34.1   7.9
 10.|-- 116.251.107.18             0.0%    15    7.8   8.1   7.4  12.6   1.3
 11.|-- ???                       100.0    15    0.0   0.0   0.0   0.0   0.0　　＃　100% 是因为机房关键设备节点禁止ping
 12.|-- ???                       100.0    15    0.0   0.0   0.0   0.0   0.0
 13.|-- 47.100.15.8                0.0%    15   13.3  13.5  13.0  14.3   0.3   ＃　阿里云ECS
```

报告说明：
第一列:显示的是IP地址和本机域名，这点和traceroute很像
第二列:是显示的每个对应IP的丢包率
第三列:即参数`-c`的指定值
第四列:显示的最近一次的返回时延
第五列:是平均值 这个应该是发送ping包的平均时延
第六列:是最好或者说时延最短的
第七列:是最差或者说时延最常的
第八列:是标准偏差