# iperf3

iperf3是一个网络速度测试工具，支持IPv4与IPv6，支持TCP、UDP、SCTP传输协议，可在Windows、Mac OS X、Linux、FreeBSD等各种平台使用.

## example
```sh
# 启动服务器模式，暴露在端口16000，每1秒输出一次统计数据
iperf3 -s -i 1 -p 16000

# 测试吞吐量
# 客户端模式，默认使用tcp通信，目标机为172.16.13.218，持续时间45，-P参数指定网卡队列数为4（跟测试的机型有关），目标端口16000
iperf3 -c 172.16.13.218 -t 45 -P 4 -p 16000
# 测试PPS
# 客户端模式，使用udp发包，包大小为16字节，持续时间45秒，-A指定CPU亲和性绑定到第0个CPU
iperf3 -u -l 16 -b 100m -t 45 -c 172.16.13.218 -i 1 -p 16000 -A 0
# 测试延迟
# ping目标机30次
ping -c 30 172.16.13.218
```

## FAQ
### iperf/iperf3区别
1. iperf3不支持双工模式测试
1.  iperf 和 iperf3的发包机制是有差别的:iperf均匀的发送报文; iperf3每100ms发一轮报文，每次在2、3ms内瞬间发完. 这导致使用iperf3打流总是打不满接口上配置的速率，而使用iperf却可以. 因此接口限速使用 iperf3 作为测试工具需要调整令牌桶参数以达到最佳效果.