# vim
文本编辑器

Vim 的三种模式:
- 命令模式：控制光标移动，可对文本进行复制、粘贴、删除和查找等工作
- 输入模式：正常的文本录入
- 末行(控制)模式：保存或退出文档，以及设置编辑环境

Vim 中常用的命令:
dd 删除（剪切）光标所在整行
5dd 删除（剪切）从光标处开始的 5 行
yy 复制光标所在整行
5yy 复制从光标处开始的 5 行
n 显示搜索命令定位到的下一个字符串
N 显示搜索命令定位到的上一个字符串
u 撤销上一步的操作
p 将之前删除（dd）或复制（yy）过的数据粘贴到光标后面

末行模式中可用的命令:
- :w 保存
- :q 退出
- :q! 强制退出（放弃对文档的修改内容）
- :wq! 强制保存退出
- :set nu 显示行号
- :set nonu 不显示行号
- :命令 执行该命令
- :整数 跳转到该行
- :s/one/two 将当前光标所在行的第一个 one 替换成 two 
- :s/one/two/g 将当前光标所在行的所有 one 替换成 two 
- :%s/one/two/g 将全文中的所有 one 替换成 two 
- ?字符串 在文本中从下至上搜索该字符串
- /字符串 在文本中从上至下搜索该字符串

## example
```
# vim + file # 打开文件, 将光标置于最后一行
# vim +n file # 打开文件, 将光标置于第n行
# vim +/pattern file # 打开文件, 将光标置于第一个与pattern匹配的位置
# vim -R file # 只读打开
# vim -r file # 恢复删除vim打开时崩溃的文件
```

## 命令/快捷键

### 其他
- v : 进入Visual模式

### 移动光标
- w : 光标向右移动一个单词
- b : 光标向左移动一个单词
- nG : 光标移至第n行的行首
- n+ : 光标下移n行
- n- : 光标上移n行
- n$ : 相对于当前行, 将光标后移至n行的行尾
- H : 将光标移至当前屏幕的顶行
- M : 将光标移至当前屏幕的中间行
- L : 将光标移至当前屏幕的最底行
- 0 : 将光标移至当前行首
- $ : 将光标移至当前行尾
- :$ : 将光标移至文尾

### 屏幕翻滚
- ctrl+u : 相对于屏幕, 向文件首翻半屏
- ctrl+d : 相对于屏幕, 向文件尾翻半屏
- ctrl+b : 相对于屏幕, 向文件首翻一屏
- ctrl+f : 相对于屏幕, 向文件尾翻一屏
- nz+Enter : 将文件的第n行滚至屏幕顶部, 如果不指定n值, 将当前行滚至屏幕顶部

### 插入/删除
- Esc : 退出命令行模式
- i : 在光标处插入
- a : 在光标处后插入
- o : 在当前行之下新开一行
- O : 在当前行之上新开一行
- r : 替换光标所在的字符, 输入r后,在键盘输入新字符即可完成替换
- x : 删除光标所在的字符
- dd : 删除光标所在的行. 删除的内容自动保存到剪贴板
- yy : 将光标所在行复制到剪贴板, 如果在yy前加上数字则表示复制多行
- p : 将剪贴板的内容复制到光标后
- P : 将剪贴板的内容复制到光标前
- yw : 将光标所在的单词复制到剪贴板

### 搜索/替换
参考:
- [Vim查找与替换命令大全，功能完爆IDE!](https://segmentfault.com/a/1190000022323247)

- `/abc` : 向前查找字符串abc
- `?abc` : 向后查找字符串abc
- `n` : 在同一方向上重复执行上次的搜索命令
- `N` : 在相反方向上重复执行上次的搜索命令
- `:s/a1/a2/g` : 将当前光标所在的行中的所有a1替换为a2
- `:n1,n2s/a1/a2/g` : 将n1~n2行中的所有a1替换为a2
- `:g/a1/a2/g` : 将文中的所有a1替换为a2
- `:set nu/number` : 添加行号

### 保存/退出
- `:wq` : 保存并退出
- `:w` : 保存, 但不退出
- `:w!` : 强制保存
- `:w file` : 另存为
- `:q` : 不保存就退出
- `:q!` : 不保存, 强制退出